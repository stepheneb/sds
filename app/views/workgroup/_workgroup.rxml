xm.entry 'xml:base' => url_for(:controller => 'offering', :action => 'list', :only_path => false).to_s do
  xm.author do
    xm.name members.collect {|m| m.name}.join(', ')
  end
  xm.id        "tag:#{request.host_with_port},#{workgroup.updated_at.to_s}:#{workgroup.id}"
  xm.published workgroup.created_at.xmlschema
  xm.updated   workgroup.updated_at.xmlschema
  xm.link "rel" => "alternate", "type" => "text/html", 
    "href" => url_for(:controller => 'workgroup', :action => 'show', :id => workgroup.id, :only_path => false).to_s
  xm.title     strip_tags(workgroup.name)
  
  xm << %{<content type="html">\n}
  xm << h(%{<p>Data returned by Workgroup: #{workgroup.id}: <b>#{workgroup.name}</b>, with the following #{members.length > 1 ? "members" : "member"}: <b>#{members.collect {|m| m.name}.join(', ')}</b>, from Wise run: <b>#{workgroup.offering.name}</b>, of the Project <b>#{workgroup.offering.curnit.name}</b>.})
  workgroup.bundles.each do |b| 
    b.socks.each do |s|
      xm << h(%{<div style="background-color: #ccc; padding: 10px; border: 1px solid grey; margin: 10px; font: smaller monospaced sans-serif;" >})
      xm << h(%{<p>Sock ms offset: #{s.ms_offset}, Pod uuid: #{s.pod.uuid}, Rim name: #{s.pod.rim_name}</p>})
      xm << h(REXML::Document.new(CGI.unescapeHTML(s.value)).to_s)
      xm << h(%{</div>})
    end
  end
  xm << %{</content>}
end
